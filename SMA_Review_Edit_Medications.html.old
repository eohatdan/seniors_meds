
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Review/Edit Medications</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>

<h2>Review/Edit Medications</h2>
<div id="medicationsList"></div>

<button onclick="window.top.location.href='index.html'">⬅️ Back to Main Menu</button>

<script>
let medications = [];

function loadMedications() {
  const stored = localStorage.getItem('medicationsList');
  medications = stored ? JSON.parse(stored) : [];
  renderTable();
}

function renderTable() {
  const container = document.getElementById('medicationsList');
  container.innerHTML = '';
  medications.forEach((med, index) => {
    const row = document.createElement('div');
    row.className = 'record-row';
    const text = document.createElement('div');
    text.className = 'record-text';
    text.innerHTML = `<strong>${med.medication}</strong><br>Dosage: ${med.dosage}`;
    const dropdown = document.createElement('select');
    ['Options', 'Edit', 'Delete'].forEach(opt => {
      const option = document.createElement('option');
      option.value = opt;
      option.text = opt;
      dropdown.appendChild(option);
    });
    dropdown.onchange = function() {
      if (this.value === 'Edit') {
        const newMedication = prompt('Edit Medication:', med.medication);
        const newDosage = prompt('Edit Dosage:', med.dosage);
        if (newMedication && newDosage) {
          medications[index] = { medication: newMedication, dosage: newDosage };
          saveAndRender();
        }
      } else if (this.value === 'Delete') {
        if (confirm('Are you sure you want to delete this medication?')) {
          medications.splice(index, 1);
          saveAndRender();
        }
      }
      this.value = 'Options';
    };
    row.appendChild(text);
    row.appendChild(dropdown);
    container.appendChild(row);
  });
}

function saveAndRender() {
  localStorage.setItem('medicationsList', JSON.stringify(medications));
  renderTable();
}

document.addEventListener('DOMContentLoaded', loadMedications);
</script>

</body>
</html>
